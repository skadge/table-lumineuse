<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Table Lumineuse</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<link rel ="stylesheet" type="text/css" href="tiles.css" title="Style">

<script>

function randomColor() {
    return '#'+(function lol(m,s,c){return s[m.floor(m.random() * s.length)] +
              (c && lol(m,s,c-1));})(Math,'0123456789ABCDEF',4)
};

function randomizeColors() {
    for (i = 0; i < 15; i++) {
        document.getElementById(i.toString()).style.backgroundColor = randomColor();
    }
}

function setColorAndRandomize() {
    randomizeColors();
}

function init() {
    $(".tile").click(function() {
            randomizeColors();
            m = getComputedStyle(this).backgroundColor.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);
            if( m) {
                $.get('http://localhost:8080?content={"src":{"id":1,"type":"color","value":[' + m[1] + ',' + m[2] + ',' + m[3] +'],"x":0,"y":0}}');
            }
            });
    randomizeColors();
}

</script>
</head>
<body onload="init()">

    <div id="0" class="tile"></div>
    <div id="1" class="tile"></div>
    <div id="2" class="tile"></div>
    <div id="3" class="tile"></div>
    <div id="4" class="tile"></div>
    <div id="5" class="tile"></div>
    <div id="6" class="tile"></div>
    <div id="7" class="tile"></div>
    <div id="8" class="tile"></div>
    <div id="9" class="tile"></div>
    <div id="10" class="tile"></div>
    <div id="11" class="tile"></div>
    <div id="12" class="tile"></div>
    <div id="13" class="tile"></div>
    <div id="14" class="tile"></div>

</body>
